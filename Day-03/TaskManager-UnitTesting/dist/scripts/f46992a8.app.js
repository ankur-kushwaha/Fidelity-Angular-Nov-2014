!function(){"use strict";angular.module("exercise.angular.home",[]),angular.module("exercise.angular.dashboard",[]),angular.module("exercise.angular",["ngRoute","ngResource","ngSanitize","exercise.angular.templates","exercise.angular.home","exercise.angular.dashboard"]).run(["$log",function(a){a.log("Exercise has been loaded.")}])}(),angular.module("exercise.angular").config(["$routeProvider",function(a){"use strict";a.when("/",{templateUrl:"home/home.html",controller:"HomeController"}).when("/dashboard",{templateUrl:"dashboard/dashboard.html",controller:"DashboardController"}).otherwise({redirectTo:"/"})}]),angular.module("exercise.angular").directive("sapeMessage",function(){"use strict";return{restrict:"E",scope:{message:"@"},template:"<h2>{{ message }}</h2>"}}),angular.module("exercise.angular.dashboard").controller("DashboardController",["$scope","$location",function(a,b){"use strict";a.goHome=function(){b.path("/")}}]),angular.module("exercise.angular.home").controller("HomeController",["$scope","$location",function(a,b){"use strict";a.gotoDashboard=function(){b.path("/dashboard")}}]),angular.module("exercise.angular").directive("notificationMessage",function(){return function(a,b,c){console.dir(c),a.$watch("message",function(){console.log("message changed - ",a.message),b.fadeIn()}),b.on("click",function(){$(this).fadeOut(),a.clearMessage()})}}),angular.module("exercise.angular").filter("trimText",function(){return function(a,b){return a=a||"",b=b||10,a.length<=b?a:a.substr(0,b)+"..."}}),angular.module("exercise.angular").factory("Task",function(){function a(a){this.id=a.id||0,this.name=a.name||"",this.isCompleted=a.isCompleted||!1,this.createdAt=a.createdAt||new Date,this.completedAt=a.completedAt}return a.prototype.toggleCompletion=function(){this.isCompleted=!this.isCompleted,this.completedAt=this.isCompleted?new Date:void 0},a}),angular.module("exercise.angular").service("taskStorage",["Task",function(a){var b=window.localStorage;this.getAll=function(){for(var c=[],d=0;d<b.length;d++){var e=b.key(d),f=b.getItem(e),g=window.JSON.parse(f),h=new a(g);c.push(h)}return c},this.addOrUpdate=function(a){b.setItem(a.id,window.JSON.stringify(a))},this.remove=function(a){b.removeItem(a.id)}}]),angular.module("exercise.angular").controller("taskController",["$rootScope","$scope","taskStorage","Task",function(a,b,c,d){a.data={dummy:"some value"},b.tasks=c.getAll(),b.sortOrder="",b.reverse=!1,b.message="",b.clearMessage=function(){b.message=""},b.sort=function(a){return b.sortOrder===a?void(b.reverse=!b.reverse):(b.sortOrder=a,void(b.reverse=!1))},b.addTask=function(a){var e=new d({id:(new Date).getTime().toString(),name:a,isCompleted:!1});c.addOrUpdate(e),b.tasks.push(e),b.message="A new task is added"},b.toggleCompletion=function(a){a.toggleCompletion(),c.addOrUpdate(a)},b.removeCompleted=function(){for(var a=b.tasks.length-1;a>=0;a--)b.tasks[a].isCompleted&&(c.remove(b.tasks[a]),b.tasks.splice(a,1));b.message="Zero or more completed tasks are removed"},b.getTotalCount=function(){return b.tasks.length},b.getCompletedCount=function(){var a=0;return angular.forEach(b.tasks,function(b){b.isCompleted&&++a}),a}}]),angular.module("exercise.angular.templates",[]).run(["$templateCache",function(a){a.put("dashboard/dashboard.html",'<div class="dashboard">\n    <sape-message message="Your Dashboard"></sape-message>\n</div>\n\n<button type="button" ng-click="goHome()">Go back Home</button>'),a.put("home/home.html",'<div class="home">\n    <sape-message message="Welcome Home"></sape-message>\n</div>\n\n<button type="button" ng-click="gotoDashboard()">Go to Dashboard</button>')}]);